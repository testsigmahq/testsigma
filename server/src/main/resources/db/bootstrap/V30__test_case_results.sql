DROP TABLE IF EXISTS `test_case_results`;
CREATE TABLE `test_case_results`
(
  `id`                           BIGINT(20) NOT NULL AUTO_INCREMENT,
  `test_case_id`                 BIGINT(20) NOT NULL,
  `test_plan_result_id`          BIGINT(20),
  `test_device_result_id`        BIGINT(20) NOT NULL,
  `suite_id`                     BIGINT(20)      DEFAULT NULL,
  `iteration`                    VARCHAR(250)    DEFAULT NULL,
  `result`                       VARCHAR(100)    DEFAULT NULL,
  `status`                       VARCHAR(100)    DEFAULT 'STATUS_CREATED',
  `is_step_group`                 INT(1)          DEFAULT NULL,
  `message`                      TEXT,
  `start_time`                   TIMESTAMP  NULL DEFAULT NULL,
  `end_time`                     TIMESTAMP  NULL DEFAULT NULL,
  `duration`                     BIGINT(20)      DEFAULT NULL,
  `suite_result_id`              BIGINT(20),
  `parent_id`                    BIGINT(20),
  `test_data_set_name`           VARCHAR(1000)   DEFAULT NULL,
  `order_id`                     BIGINT(20),
  `type`                         INT(4),
  `test_case_status`             VARCHAR(255),
  `priority`                     INT(4),
  `test_data_details`            JSON DEFAULT NULL,
  `is_data_driven`               BIT(1),
  `test_data_id`                 BIGINT(20),
  `test_case_details`            json            DEFAULT NULL,
  `started`                      BIT(1),
  `total_count`                  BIGINT(20)      DEFAULT 0,
  `failed_count`                 BIGINT(20)      DEFAULT 0,
  `passed_count`                 BIGINT(20)      DEFAULT 0,
  `aborted_count`                BIGINT(20)      DEFAULT 0,
  `stopped_count`                BIGINT(20)      DEFAULT 0,
  `not_executed_count`           BIGINT(20)      DEFAULT 0,
  `queued_count`                 BIGINT(20)      DEFAULT 0,
  `is_visually_passed`           BIT(1)          DEFAULT NULL,
  `session_id`                   VARCHAR(256)    DEFAULT NULL,
  `re_run_parent_id`             BIGINT(20)      DEFAULT NULL,
  `platform_assets_endpoint_url` TEXT            DEFAULT NULL,
  `created_date`                 DATETIME        DEFAULT CURRENT_TIMESTAMP,
  `updated_date`                 DATETIME        DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (id),
  KEY `index_test_case_results_on_test_device_result_id` (`test_device_result_id`),
  KEY `index_test_case_results_on_env_run_id_and_suite_result_id` (`test_device_result_id`, `suite_result_id`),
  KEY `index_test_case_results_on_test_plan_result_id` (test_plan_result_id),
  KEY `index_test_case_results_on_parent_id` (`parent_id`),
  KEY `index_test_case_results_on_suite_result_id` (`suite_result_id`),
  KEY `index_test_case_results_on_result` (`result`),
  KEY `index_test_case_results_on_iteration` (`iteration`),
  KEY `index_test_case_results_on_test_case_id` (`test_case_id`),
  KEY `index_test_case_results_on_re_run_parent_id` (`re_run_parent_id`),
  CONSTRAINT `fk_env_run_id_in_test_case_results_to_test_device_results` FOREIGN KEY (`test_device_result_id`) REFERENCES `test_device_results` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION,
  CONSTRAINT `fk_test_data_id_in_test_case_results_to_test_data` FOREIGN KEY (test_data_id) REFERENCES `test_data` (`id`) ON DELETE SET NULL ON UPDATE CASCADE,
  CONSTRAINT `fk_test_plan_result_id_in_test_case_results_to_test_plan_results` FOREIGN KEY (`test_plan_result_id`) REFERENCES `test_plan_results` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION,
  CONSTRAINT `fk_suite_result_id_in_test_case_results_to_test_suite_results` FOREIGN KEY (`suite_result_id`) REFERENCES `test_suite_results` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE = InnoDB
  AUTO_INCREMENT = 5
  DEFAULT CHARSET = utf8
  COLLATE utf8_unicode_ci;
